<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title></title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-csv/0.8.9/jquery.csv.min.js"></script>
    <!--デザイン参考：https://saruwakakun.com/html-css/reference/box -->
    <style>
        div li {
            text-align: center;
            display: inline-block;
            margin: 1em;
        }

        div li a {
            text-decoration: none;
            color: #fff;
            font-weight: bold;
        }

        .box {
            position: relative;
            margin: 2em 0;
            padding: 0.5em 1em;
            border: solid 3px #95ccff;
            border-radius: 8px;
            width: 640px;
        }

        .box .title {
            position: absolute;
            display: inline-block;
            top: -13px;
            left: 10px;
            padding: 0 9px;
            line-height: 1;
            font-size: 19px;
            background: #FFF;
            color: #95ccff;
            font-weight: bold;
        }

        .box p {
            margin: 0;
            padding: 0;
        }

        .btn {
            font-size: 1em;
            font-weight: bold;
            padding: 10px 30px;
            background-color: #5fb3f5;
            color: #fff;
            border-style: none;
        }

        @media only screen and (max-width: 640px) {
            .box {
                width: 90%;
            }

            li {
                width: 100%;
            }
        }
    </style>
    <script>
        $(function () {
            var csvData;
            var insert = '';
            var hdn = '';
            $.ajax({
                url: 'test.csv',
                success: function (data) {

                    //CSV取得
                    csvData = $.csv.toArrays(data);

                    //HTML生成
                    for (var i = 1; i < csvData.length; i++) {
                        if (csvData[i][0] != 0) {
                            hdn = "hidden";
                        }
                        insert += '<div class="box" id="' + csvData[i][0] + '" ' + hdn + '>';
                        insert += '<span class="title">' + csvData[i][1] + '</span>';
                        insert += '<p>' + csvData[i][2] + '</p>';
                        insert += '<form>';
                        insert += '<ul>';
                        for (var j = 3; j < csvData[i].length; j++) {
                            if (csvData[i][j] != '') {
                                var x = csvData[i][j];
                                insert += '<li> <input type="button" name="' + (x - 1) + '" value="' + csvData[x][1] + '" class="btn"></li>';
                            }
                        }
                        insert += '</ul>';
                        insert += '</form>';
                        insert += '</div>';
                    };
                    $('#csv_body').append(insert);
                }
            });

            //ボタンクリック処理
            $(document).on("click", ".btn", function () {
                var pid = $(this).parents('div').attr('id');
                var vid = $(this).attr('name');

                //カレント項目非表示
                $('#' + pid).hide()
                //選択項目表示
                $('#' + vid).show()
            });
        });
    </script>
</head>
<body>
    <div id="csv_body"></div>
</body>
</html>
