▼ html
<div class="container">
    {{ITEMS_LOOP}}
    <div class="tpl_item" style="display:none">
        <a href="{{URL}}" target="{{TARGET}}">
            <div class="tpl_image">
                <img src="{{IMG}}" alt="">
            </div>
            <div class="tpl_name">
                {{TITLE}}
            </div>
            <div class="tpl_catch_1">
                {{DESCRIPTION}}
            </div>
                {{IF_FREE_TEXT_1}}
                <div class="free_text_1" style="display:none">{{FREE_TEXT_1}}</div>
                {{END_IF}}
                {{IF_FREE_TEXT_2}}
                <div class="free_text_2" style="display:none">{{FREE_TEXT_2}}</div>
                {{END_IF}}
        </a>
    </div>
    {{ITEMS_END}}
</div>

▼ js
document.addEventListener('template_load', function () {
    $(function () {
            var preStart = new Date($(".free_text_1:first").text());
            var preEnd = new Date($(".free_text_2:first").text());

            //プレ開始日に1日加算
            var preEnd_p1 = new Date(preEnd);
            preEnd_p1.setDate(preEnd_p1.getDate() + 1);

            var saleEnd = new Date($(".free_text_2:last").text());

            //セール終了日に1日減算
            var saleEnd_m1 = new Date(saleEnd);
            saleEnd_m1.setDate(saleEnd_m1.getDate() - 1);

        var tdy = new Date();
            if (preStart > tdy || saleEnd <= tdy) {
                //終了しました
                $(".tpl_item:last").css("display", "");
            } else if (preStart <= tdy && preEnd >= tdy) {
                //まもなくスタート
                $(".tpl_item:first").css("display", "");
            } else if (preEnd < tdy && preEnd_p1 >= tdy) {
                //スタート！
                $(".tpl_item:nth-child(2)").css("display", "");
            } else if (preEnd_p1 < tdy && saleEnd_m1 > tdy) {
                //期間中
                $(".tpl_item:nth-child(3)").css("display", "");
            } else if (saleEnd_m1 <= tdy && saleEnd > tdy) {
                //もうすぐ終了
                $(".tpl_item:nth-child(4)").css("display", "");
            }
    });
}, false);

▼js
document.addEventListener('template_load', function () {
    $(function () {
        //表示配列取得
        var arr_slice = window.parent.parentFunc();        
        for (i in arr_slice) {
            $(".tpl_item:nth-child(" + arr_slice[i] + ")").css("display", "");
        }

        //背景色
        $(".tpl_item:nth-child(" + param.position + ")").css("background-color", "red");
        //リンク削除
        $(".tpl_item:nth-child(" + param.position + ")").children().contents().unwrap();
    });
}, false);

▼ html
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <script id="jQueryTag" src="./index_files/jquery-3.2.1.min.js"></script>
</head>
<body>
    <div id="arr_log"></div>
    <div id="c1" class="container" style="display:none">
        <p>1</p>
        <iframe src="./index.html#!id=8325&position=1" width="800px" height="200px" frameborder="0" scrolling="no"></iframe><br />
    </div>
    <div id="c2" class="container" style="display:none">
        <p>2</p>
        <iframe src="./index.html#!id=8325&position=2" width="800px" height="200px" frameborder="0" scrolling="no"></iframe><br />
    </div>
    <div id="c3" class="container" style="display:none">
        <p>3</p>
        <iframe src="./index.html#!id=8325&position=3" width="800px" height="200px" frameborder="0" scrolling="no"></iframe><br />
    </div>
    <div id="c4" class="container" style="display:none">
        <p>4</p>
        <iframe src="./index.html#!id=8325&position=4" width="800px" height="200px" frameborder="0" scrolling="no"></iframe><br />
    </div>
    <div id="c5" class="container" style="display:none">
        <p>5</p>
        <iframe src="./index.html#!id=8325&position=5" width="800px" height="200px" frameborder="0" scrolling="no"></iframe><br />
    </div>
    <script type="text/javascript">

        var arr_slice;

        $(function () {

            //数値配列作成
            var arr100 = new Array();
            for (var i = 1; i < 100; ++i) {
                arr100.push(i);
            }

            //配列ランダム並び替え
            for (var i = arr100.length - 1; i > 0; i--) {

                var r = Math.floor(Math.random() * (i + 1));

                var tmp = arr100[i];
                arr100[i] = arr100[r];
                arr100[r] = tmp;
            }

            //配列フィルタ（範囲1..4）
            arr_slice = arr100.filter(function (value) {
                return value < $('.container').length;

            }).slice(1, 4);

            //配列確認
            document.getElementById("arr_log").innerText = arr_slice;

            //該当要素表示
            for (i in arr_slice) {
                $(".container:nth-child(" + (arr_slice[i] + 1) + ")").css("display", "");
            };

        })();

        //小フレームより呼出し
        function parentFunc() {
            return arr_slice;
        };
    </script>
</body>
</html>
